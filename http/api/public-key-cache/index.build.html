<!DOCTYPE html>

<? title = 'Public key cache'; ?>

<html lang="en">
<head>
	<? include('../../CommonHtmlHeader.inc.html') ?>
	<title><? title ?> â€” Condensation API</title>
</head>

<body>

<? include('../../CommonHeader.inc.html') ?>
<? include('../Level1.inc.html') ?>

<div class="main">
	<h1><? title ?></h1>

	<p>Keeps recently used public keys in memory. A public key cache is used for <a href="/api/message-reader/">message processing</a>.</p>

	<h2>Instance creation</h2>
	<div class="hscroll api java"><pre>PublicKeyCache publicKeyCache = new PublicKeyCache(1024);</pre></div>
	<div class="hscroll api javascript"><pre>var publicKeyCache = new cds.PublicKeyCache(1024);</pre></div>
	<div class="hscroll api perl"><pre>my $publicKeyCache = CDS::PublicKeyCache-&gt;new(1024);</pre></div>
	<p>Creates an empty cache with space for 1024 public keys.</p>

	<h2>Cache access</h2>
	<div class="hscroll api java"><pre>publicKeyCache.add(publicKey);</pre></div>
	<div class="hscroll api javascript"><pre>publicKeyCache.add(publicKey);</pre></div>
	<div class="hscroll api perl"><pre>$publicKeyCache-&gt;add($publicKey);</pre></div>
	<p>Adds a public key to the cache. If the </p>

	<div class="space"></div>
	<div class="hscroll api java"><pre>PublicKey publicKey = publicKeyCache.get(hash);</pre></div>
	<div class="hscroll api javascript"><pre>var publicKey = publicKeyCache.get(hash);</pre></div>
	<div class="hscroll api perl"><pre>my $publicKey = $publicKeyCache-&gt;get($hash);</pre></div>
	<p>Retrieves a public key from the cache. If the corresponding key is not in the cache, the function returns <i class="java javascript">null</i><i class="perl">undef</i>.</p>

	<h2>Cleanup</h2>
	<div class="hscroll api java"><pre>publicKeyCache.cleanup(10 * Duration.MINUTE);</pre></div>
	<div class="hscroll api javascript"><pre>publicKeyCache.cleanup(10 * cds.MINUTE);</pre></div>
	<div class="hscroll api perl"><pre>$publicKeyCache-&gt;cleanup(10 * CDS-&gt;MINUTE);</pre></div>
	<p>Removes all entries from the cache that have not been accessed for more than 10 minutes.</p>
</div>

<script src="../platforms.js"></script>
<? include('../../CommonFooter.inc.html') ?>

</body>
</html>
