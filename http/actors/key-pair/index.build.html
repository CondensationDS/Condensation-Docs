<!DOCTYPE html>

<? title = 'Key pair (private and public key)'; ?>

<html lang="en">
<head>
	<? include('../../CommonHtmlHeader.inc.html') ?>
	<title><? title ?> â€” Condensation</title>
</head>

<body>

<? include('../../CommonHeader.inc.html') ?>
<? include('../Level1.inc.html') ?>

<div class="main">
	<? verified(2019, 02); ?>
	<h1><? title ?></h1>

	<p>Condensation uses <a href="/notes/cryptography/">RSA 2048</a> key pairs to asymmetrically encrypt and sign data. A key pair consists of a private key, and a corresponding public key:</p>
	<div class="hscroll indent"><? svgFile('KeyPair.svg') ?></div>
	<p>Key pairs are generated by the application taking part in the Condensation protocol on the device on which that application is running. By generating a key pair, the application implicitly creates an <a href="/actors/actor/">actor</a>.</p>

	<h2 id="private-key">Private key</h2>
	<p>The private key consists of three integers:</p>
	<ul>
		<li>a public exponent <i>e</i>, usually 65537</li>
		<li>two 1024-bit primes <i>p</i> and <i>q</i></li>
	</ul>
	<p>The private key should be stored in a safe place on the device on which it was generated, and may be protected with a pin code, a fingerprint, or any other appropriate mechanism.</p>
	<p>The primes <i>p</i> and <i>q</i> must be kept secret, and should never leave the device. They should <i>not</i> be backed up. Condensation can deal with <a href="/actors/key-management/#key-loss">lost keys</a>.</p>

	<h2 id="public-key">Public key</h2>
	<p>The public key is serialized as an <a href="/serialization/object/">object</a> carrying a <a href="/serialization/record/">record</a> with the following structure:</p>
	<div class="hscroll box">
		<pre>e
  <span class="im">public exponent</span>
n
  <span class="im">modulus</span></pre>
	</div>
	<p>Both numbers are encoded as unsigned big-endian integers. The public exponent is usually 65537, which can be encoded with 3 bytes (<tt>01 00 01</tt>). The modulus is 256 bytes (2048 bits) long.</p>
	<p>The order of the two nodes does not matter, but it is recommended to use the above order. Any additional information about the actor should be stored on its <a href="/actors/public-card/">public card</a>, and not be added to the public key.</p>
	<p>The hash of the public key object is used to <a href="/notes/identity-spoofing/">identify an actor</a>. Hence, the public key object cannot be modified throughout the lifetime of an actor.</p>
	<p>The public key object must be uploaded onto all <a href="/stores/store/">stores</a> used by the actor.</p>
</div>

<? include('../../CommonFooter.inc.html') ?>

</body>
</html>
